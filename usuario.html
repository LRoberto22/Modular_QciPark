
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Qci Park</title>
        <link rel="stylesheet" href="css/style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    </head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <body>
        <head>
            <title>Qci Park</title>
            <link rel="stylesheet" href="css/style.css">
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
            <link rel="stylesheet" href="node_modules/bootstrap-icons/bootstrap-icons.svg">
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
            <script src="js/jquery-3.4.1.min.js"></script>
            <script src="js/custom.js"></script>
            <script>
                window.onload = function() {
                    // Verifica si las variables son nulas
                    
                };
            </script>
        </head>
        <body>
            <header>
                <div class="row py-1 justify-content-md-center text-center" style="background-color: #D9D9D9;">
                    <div class="col center-block align-center">
                        <a class="btn" data-bs-toggle="offcanvas" href="#offcanvas" role="button" style="margin-top: 10px; margin-left: 30px;">
                            <img src="Images/menu-icon.png" style="height: 50px; width: 50px;">
                        </a>
                          <div class="offcanvas offcanvas-start" tabindex="1" id="offcanvas" aria-labelledby="offcanvasLabel" style="background-color: #A6A6A6;">
                            <div class="offcanvas-header">
                              <h5 class="offcanvas-title" id="offcanvasLabel"></h5>
                              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body">
                                <div class="list-group" style="color: #A6A6A6;">
                                    <a href="index.html" class="list-group-item list-group-item-action" style="background-color: #A6A6A6; text-align: left; font-size: 30px;"><img src="Images/home-icon.png" style="width: 20%; padding-right: 20px;" >Inicio</a>
                                    <a href="usuario.html" class="list-group-item list-group-item-action text-left" style="background-color: #A6A6A6; text-align: left; font-size: 30px;"><img src="Images/user-icon.png" style="width: 20%; padding-right: 20px;" >Usuario</a>
                                    <a href="graficas.html" class="list-group-item list-group-item-action" style="background-color: #A6A6A6; text-align: left; font-size: 30px;"><img src="Images/graphics-icon.png" style="width: 20%; padding-right: 20px;" >Graficas</a>
                                    <a href="" class="list-group-item list-group-item-action" style="background-color: #A6A6A6; text-align: left; font-size: 30px;"><img src="Images/assistant-icon.png" style="width: 20%; padding-right: 20px;" >Asistente</a>
                                    <a href="ingreso_horarios.html" class="list-group-item list-group-item-action" style="background-color: #A6A6A6; text-align: left; font-size: 30px;"><img src="Images/horario.png" style="width: 20%; padding-right: 20px;" >Horario</a>
                                </div>
                            </div>
                          </div>
                    </div>
                    <div class="col-8">
                        <a href="index.html"><img src="Images/logo.png" class="rounded mx-auto d-block" style="height: 70px; width: 70px;"></a>
                    </div>
                    <div class="col">
                        <div class="progress blue">
                            <span class="progress-left">
                                <span class="progress-bar"></span>
                            </span>
                            <span class="progress-right">
                                <span class="progress-bar"></span>
                            </span>
                            <div class="progress-value">80%</div>
                          </div>
                    </div>
                </div>
            </header>
        <div class="container text-center" style="margin-top: 50px;">
            <div class="row">
                <div class="col" style="height: fit-content;">
                    <!-- Foto usuario -->
                    <div class="container d-flex justify-content-center">
                        <img id="photoUser" src="Images/user-icon.png" style="width: 200px; height: 200px;"> <!--Código para cuando se pueda php src="Archivos/Empleados/<?php echo $nombreFoto ?>" -->
                    </div>
                    <!-- Info usuario y día de la semana -->
                    <div class="container" style="background-color: #F8A80B; width: 70%; height: 70px; border-radius: 10pt; margin-top: 15px; font-weight: bold; padding-top: 11px;">
                        <div class="container nombreUsuario d-flex justify-content-center" style="font-size: 20px;">
                            <label id="nombreUser">Bienvenida</label>
                        </div>
                        <div class="container text-center" id="diaSemana" style="margin-top: 1px;">
                            <label id="diaHoy"></label>
                        </div>
                    </div>
                    <!-- Horario entrada -->
                    <div class="container d-flex justify-content-center horarioEntrada" style="margin-top: 20px;"> 
                        <div class="infoEntrada row d-flex justify-content-center">
                            <div class="col">
                                Hora de entrada: 
                            </div>
                            <div class="col d-flex align-items-center" id="horaEntrada">
                                <label id="entradaHoy"></label>
                            </div>
                        </div>
                    </div>
                    <!-- Horario de salida -->
                    <div class="container d-flex justify-content-center horarioSalida" style="margin-top: 15px;">
                        <div class="infoSalida row">
                            <div class="col">
                                Hora de Salida: 
                            </div>
                            <div class="col d-flex align-items-center" id="horaEntrada">
                                <label id="salidaHoy"></label>
                            </div>
                        </div>
                    </div>
                    <!-- Boton cambiar horario -->
                    <div class="container cambiarHorario" style="margin-top: 20px; background-color: black; width: fit-content; border-radius: 45pt;">
                        <a href="ingreso_horarios.html" class="btn btn-primary" style="background-color: black; border-color: black;">Cambiar Horario</a>
                    </div>
                </div>
                <div class="col">
                    <!-- Label Tu horario -->
                    <div class="container" style="background-color: #A6A6A6; width:fit-content; height: 40px; border-radius: 45pt; margin-top: 15px; font-weight: bold; padding-top: 1%;">
                        <div class="container nombreUsuario d-flex justify-content-center" id="nombreUser" style="color: black;">
                            Tú horario
                        </div>
                    </div>
                     <!-- tabla de horario -->
                     <div class="container d-flex justify-content-center" style="margin-top: 15px;">
                        <div class="display: col"> 
                            <div class="row" style="border: solid 1px;">
                                <div class="col-md-2"><label>L</label></div>
                                <div class="col-md-2"><label>M</label></div>
                                <div class="col-md-2"><label>I</label></div>
                                <div class="col-md-2"><label>J</label></div>
                                <div class="col-md-2"><label>V</label></div>
                                <div class="col-md-2"><label>S</label></div>
                            </div>
                            <div class="row" style="border: solid 1px;">
                                <div class="col-md-2"><label id="lunesEntra">10:00</label></div>
                                <div class="col-md-2"><label id="martesEntra">10:00</label></div>
                                <div class="col-md-2"><label id="miercolesEntra">10:00</label></div>
                                <div class="col-md-2"><label id="juevesEntra">10:00</label></div>
                                <div class="col-md-2"><label id="viernesEntra">10:00</label></div>
                                <div class="col-md-2"><label id="sabadoEntra">10:00</label></div>
                            </div>
                            <div class="row" style="border: solid 1px;">
                                <div class="col-md-2"><label id="lunesSalida">10:00</label></div>
                                <div class="col-md-2"><label id="martesSalida">10:00</label></div>
                                <div class="col-md-2"><label id="miercolesSalida">10:00</label></div>
                                <div class="col-md-2"><label id="juevesSalida">10:00</label></div>
                                <div class="col-md-2"><label id="viernesSalida">10:00</label></div>
                                <div class="col-md-2"><label id="sabadoSalida">10:00</label></div>
                            </div>
                        </div>
                    </div>
                        <!-- Recomendaciones -->
                    <div class="" style="margin-top: 15px;width: 100%; display: table; height: 210px;">
                        <div class="row g-2 align-items-start" style="height: 210px;">
                            <div class="" style="width: 70%; overflow: scroll; overflow-x: hidden; overflow-y: inherit; height: 210px; border-style: solid; border-color: #F8A80B; border-end-end-radius: -45pt;">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur, suscipit. Veniam amet consectetur fugiat vitae, autem delectus id nesciunt laborum? Eius error cumque deleniti nisi? Consequuntur placeat molestiae sint ullam.
                                Reprehenderit aspernatur quos voluptatibus illo aperiam accusantium laborum vel velit, obcaecati repellat ad repudiandae vitae minus. Corrupti, eaque hic? Consectetur placeat temporibus mollitia aperiam dolor nisi corrupti quibusdam dicta laboriosam.
                                Voluptate accusantium nulla voluptas neque, cupiditate culpa tempore velit 
                            </div>
                            <div class="text-right" style="width: 30%; height: auto; margin-top: 30%;">
                                <img src="Images/assistant-icon.png" style="width: 70px;" >
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script>
        var usuario = 216666666;
        var fechaActual = new Date();
        var diaDeLaSemana = fechaActual.getDay(); //Obtenemos el dia de la semana 
        window.onload = function(){
            infoHorario();
            consultaHorario();
            checarSesion();
        }
        function infoHorario(){
            var respuestaJSON = {"diaSemanaActual":diaDeLaSemana, "usuario": usuario}; //Lo enviamos al endpoint
            console.log(respuestaJSON);
            $.post('http://localhost:8000/infoHorario', respuestaJSON, function(data){ //Data nos retorna la consulta a la bd
                try{   
                    document.getElementById("entradaHoy").textContent = data[0][0]; //Hora de entrada
                    document.getElementById("salidaHoy").textContent = data[0][1];  //Hora de salida 
                    document.getElementById("diaHoy").textContent = data[0][2];   //Dia actual
                }
                catch(error){
                    console.log(error.message);
                }
            }, "json");
        }
        function consultaHorario(){
            var diasSemana = ["lunes", "martes", "miercoles", "jueves", "viernes", "sabado"];
            var diasClase = [];
            var indexDia = 2;
            var respuestaJSON = {"usr": String(usuario)};
            $.post('http://localhost:8000/consultaHorario', respuestaJSON, function(data){
                try{
                    console.log(data);
                    console.log(data[0]);        
                    for(var i = 0; i<=data[0].length; i++){
                        diasClase[i] = data[0][i][2];
                        
                        // var diaEntrada = document.getElementById(diasSemana[dia]+"Entra");
                        // var diaSalida = document.getElementById(diasSemana[dia]+"Salida");
                        
                    }
                    console.log(diasClase);
                    
                }
                catch(error){
                    console.log(error);
                }
            }, "json");
        }
        
    </script>
</html>
